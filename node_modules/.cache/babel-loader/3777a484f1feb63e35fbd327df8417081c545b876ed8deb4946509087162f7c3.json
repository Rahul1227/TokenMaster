{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{ethers}from'ethers';// Components\nimport Navigation from'./components/Navigation';import Sort from'./components/Sort';import Card from'./components/Card';import SeatChart from'./components/SeatChart';// ABIs\nimport TokenMaster from'./abis/TokenMaster.json';// Config\nimport config from'./config.json';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),provider=_useState2[0],setProvider=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),account=_useState4[0],setAccount=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),tokenMaster=_useState6[0],setTokenMaster=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),occasions=_useState8[0],setOccasions=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),occasion=_useState10[0],setOccasion=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),toggle=_useState12[0],setToggle=_useState12[1];var loadBlockchainData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var provider,network,tokenMaster,totalOccasions,occasions,i,_occasion;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:provider=new ethers.providers.Web3Provider(window.ethereum);setProvider(provider);_context2.next=4;return provider.getNetwork();case 4:network=_context2.sent;tokenMaster=new ethers.Contract(config[network.chainId].TokenMaster.address,TokenMaster,provider);setTokenMaster(tokenMaster);_context2.next=9;return tokenMaster.totalOccasions();case 9:totalOccasions=_context2.sent;occasions=[];i=1;case 12:if(!(i<=totalOccasions)){_context2.next=20;break;}_context2.next=15;return tokenMaster.getOccasion(i);case 15:_occasion=_context2.sent;occasions.push(_occasion);case 17:i++;_context2.next=12;break;case 20:setOccasions(occasions);window.ethereum.on('accountsChanged',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accounts,account;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return window.ethereum.request({method:'eth_requestAccounts'});case 2:accounts=_context.sent;account=ethers.utils.getAddress(accounts[0]);setAccount(account);case 5:case\"end\":return _context.stop();}},_callee);})));case 22:case\"end\":return _context2.stop();}},_callee2);}));return function loadBlockchainData(){return _ref.apply(this,arguments);};}();useEffect(function(){loadBlockchainData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(Navigation,{account:account,setAccount:setAccount}),/*#__PURE__*/_jsxs(\"h2\",{className:\"header__title\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Event\"}),\" Tickets\"]})]}),/*#__PURE__*/_jsx(Sort,{}),/*#__PURE__*/_jsx(\"div\",{className:\"cards\",children:occasions.map(function(occasion,index){return/*#__PURE__*/_jsx(Card,{occasion:occasion,id:index+1,tokenMaster:tokenMaster,provider:provider,account:account,toggle:toggle,setToggle:setToggle,setOccasion:setOccasion},index);})}),toggle&&/*#__PURE__*/_jsx(SeatChart,{occasion:occasion,tokenMaster:tokenMaster,provider:provider,setToggle:setToggle})]});}export default App;","map":{"version":3,"names":["useEffect","useState","ethers","Navigation","Sort","Card","SeatChart","TokenMaster","config","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","provider","setProvider","_useState3","_useState4","account","setAccount","_useState5","_useState6","tokenMaster","setTokenMaster","_useState7","_useState8","occasions","setOccasions","_useState9","_useState10","occasion","setOccasion","_useState11","_useState12","toggle","setToggle","loadBlockchainData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","network","totalOccasions","i","_occasion","wrap","_callee2$","_context2","prev","next","providers","Web3Provider","window","ethereum","getNetwork","sent","Contract","chainId","address","getOccasion","push","on","_callee","accounts","_callee$","_context","request","method","utils","getAddress","stop","apply","arguments","children","className","map","index","id"],"sources":["C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { ethers } from 'ethers'\r\n\r\n// Components\r\nimport Navigation from './components/Navigation'\r\nimport Sort from './components/Sort'\r\nimport Card from './components/Card'\r\nimport SeatChart from './components/SeatChart'\r\n\r\n// ABIs\r\nimport TokenMaster from './abis/TokenMaster.json'\r\n\r\n// Config\r\nimport config from './config.json'\r\n\r\nfunction App() {\r\n  const [provider, setProvider] = useState(null)\r\n  const [account, setAccount] = useState(null)\r\n\r\n  const [tokenMaster, setTokenMaster] = useState(null)\r\n  const [occasions, setOccasions] = useState([])\r\n\r\n  const [occasion, setOccasion] = useState({})\r\n  const [toggle, setToggle] = useState(false)\r\n\r\n  const loadBlockchainData = async () => {\r\n    const provider = new ethers.providers.Web3Provider(window.ethereum)\r\n    setProvider(provider)\r\n\r\n    const network = await provider.getNetwork()\r\n    const tokenMaster = new ethers.Contract(config[network.chainId].TokenMaster.address, TokenMaster, provider)\r\n    setTokenMaster(tokenMaster)\r\n\r\n    const totalOccasions = await tokenMaster.totalOccasions()\r\n    const occasions = []\r\n\r\n    for (var i = 1; i <= totalOccasions; i++) {\r\n      const occasion = await tokenMaster.getOccasion(i)\r\n      occasions.push(occasion)\r\n    }\r\n\r\n    setOccasions(occasions)\r\n\r\n    window.ethereum.on('accountsChanged', async () => {\r\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      const account = ethers.utils.getAddress(accounts[0])\r\n      setAccount(account)\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadBlockchainData()\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <header>\r\n        <Navigation account={account} setAccount={setAccount} />\r\n\r\n        <h2 className=\"header__title\"><strong>Event</strong> Tickets</h2>\r\n      </header>\r\n\r\n      <Sort />\r\n\r\n      <div className='cards'>\r\n        {occasions.map((occasion, index) => (\r\n          <Card\r\n            occasion={occasion}\r\n            id={index + 1}\r\n            tokenMaster={tokenMaster}\r\n            provider={provider}\r\n            account={account}\r\n            toggle={toggle}\r\n            setToggle={setToggle}\r\n            setOccasion={setOccasion}\r\n            key={index}\r\n          />\r\n          \r\n        ))}\r\n      </div>\r\n\r\n      {toggle && (\r\n        <SeatChart\r\n          occasion={occasion}\r\n          tokenMaster={tokenMaster}\r\n          provider={provider}\r\n          setToggle={setToggle}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}