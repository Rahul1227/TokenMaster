{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';// Import Components\nimport Seat from'./Seat';// Import Assets\nimport close from'../assets/close.svg';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var SeatChart=function SeatChart(_ref){var occasion=_ref.occasion,tokenMaster=_ref.tokenMaster,provider=_ref.provider,setToggle=_ref.setToggle;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),seatsTaken=_useState2[0],setSeatsTaken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),hasSold=_useState4[0],setHasSold=_useState4[1];var getSeatsTaken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var seatsTaken;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return tokenMaster.getSeatsTaken(occasion.id);case 2:seatsTaken=_context.sent;setSeatsTaken(seatsTaken);case 4:case\"end\":return _context.stop();}},_callee);}));return function getSeatsTaken(){return _ref2.apply(this,arguments);};}();var buyHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_seat){var signer,transaction;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setHasSold(false);_context2.next=3;return provider.getSigner();case 3:signer=_context2.sent;_context2.next=6;return tokenMaster.connect(signer).mint(occasion.id,_seat,{value:occasion.cost});case 6:transaction=_context2.sent;_context2.next=9;return transaction.wait();case 9:setHasSold(true);case 10:case\"end\":return _context2.stop();}},_callee2);}));return function buyHandler(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){getSeatsTaken();},[hasSold]);return/*#__PURE__*/_jsx(\"div\",{className:\"occasion\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"occasion__seating\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[occasion.name,\" Seating Map\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setToggle(false);},className:\"occasion__close\",children:/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"Close\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"occasion__stage\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"STAGE\"})}),seatsTaken&&Array(25).fill(1).map(function(e,i){return/*#__PURE__*/_jsx(Seat,{i:i,step:1,columnStart:0,maxColumns:5,rowStart:2,maxRows:5,seatsTaken:seatsTaken,buyHandler:buyHandler},i);}),/*#__PURE__*/_jsx(\"div\",{className:\"occasion__spacer--1 \",children:/*#__PURE__*/_jsx(\"strong\",{children:\"WALKWAY\"})}),seatsTaken&&Array(Number(occasion.maxTickets)-50).fill(1).map(function(e,i){return/*#__PURE__*/_jsx(Seat,{i:i,step:26,columnStart:6,maxColumns:15,rowStart:2,maxRows:15,seatsTaken:seatsTaken,buyHandler:buyHandler},i);}),/*#__PURE__*/_jsx(\"div\",{className:\"occasion__spacer--2\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"WALKWAY\"})}),seatsTaken&&Array(25).fill(1).map(function(e,i){return/*#__PURE__*/_jsx(Seat,{i:i,step:Number(occasion.maxTickets)-24,columnStart:22,maxColumns:5,rowStart:2,maxRows:5,seatsTaken:seatsTaken,buyHandler:buyHandler},i);})]})});};export default SeatChart;","map":{"version":3,"names":["useEffect","useState","Seat","close","jsxs","_jsxs","jsx","_jsx","SeatChart","_ref","occasion","tokenMaster","provider","setToggle","_useState","_useState2","_slicedToArray","seatsTaken","setSeatsTaken","_useState3","_useState4","hasSold","setHasSold","getSeatsTaken","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","id","sent","stop","apply","arguments","buyHandler","_ref3","_callee2","_seat","signer","transaction","_callee2$","_context2","getSigner","connect","mint","value","cost","wait","_x","className","children","name","onClick","src","alt","Array","fill","map","e","i","step","columnStart","maxColumns","rowStart","maxRows","Number","maxTickets"],"sources":["C:/Users/KIIT01/Desktop/blockchain/TicketMaster/tokenmaster/src/components/SeatChart.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\n\r\n// Import Components\r\nimport Seat from './Seat'\r\n\r\n// Import Assets\r\nimport close from '../assets/close.svg'\r\n\r\nconst SeatChart = ({ occasion, tokenMaster, provider, setToggle }) => {\r\n  const [seatsTaken, setSeatsTaken] = useState(false)\r\n  const [hasSold, setHasSold] = useState(false)\r\n\r\n  const getSeatsTaken = async () => {\r\n    const seatsTaken = await tokenMaster.getSeatsTaken(occasion.id)\r\n    setSeatsTaken(seatsTaken)\r\n  }\r\n\r\n  const buyHandler = async (_seat) => {\r\n    setHasSold(false)\r\n\r\n    const signer = await provider.getSigner()\r\n    const transaction = await tokenMaster.connect(signer).mint(occasion.id, _seat, { value: occasion.cost })\r\n    await transaction.wait()\r\n\r\n    setHasSold(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    getSeatsTaken()\r\n  }, [hasSold])\r\n\r\n  return (\r\n    <div className=\"occasion\">\r\n      <div className=\"occasion__seating\">\r\n        <h1>{occasion.name} Seating Map</h1>\r\n\r\n        <button onClick={() => setToggle(false)} className=\"occasion__close\">\r\n          <img src={close} alt=\"Close\" />\r\n        </button>\r\n\r\n        <div className=\"occasion__stage\">\r\n          <strong>STAGE</strong>\r\n        </div>\r\n\r\n        {seatsTaken && Array(25).fill(1).map((e, i) =>\r\n          <Seat\r\n            i={i}\r\n            step={1}\r\n            columnStart={0}\r\n            maxColumns={5}\r\n            rowStart={2}\r\n            maxRows={5}\r\n            seatsTaken={seatsTaken}\r\n            buyHandler={buyHandler}\r\n            key={i}\r\n          />\r\n        )}\r\n\r\n        <div className=\"occasion__spacer--1 \">\r\n          <strong>WALKWAY</strong>\r\n        </div>\r\n\r\n        {seatsTaken && Array(Number(occasion.maxTickets) - 50).fill(1).map((e, i) =>\r\n          <Seat\r\n            i={i}\r\n            step={26}\r\n            columnStart={6}\r\n            maxColumns={15}\r\n            rowStart={2}\r\n            maxRows={15}\r\n            seatsTaken={seatsTaken}\r\n            buyHandler={buyHandler}\r\n            key={i}\r\n          />\r\n        )}\r\n\r\n        <div className=\"occasion__spacer--2\">\r\n          <strong>WALKWAY</strong>\r\n        </div>\r\n\r\n        {seatsTaken && Array(25).fill(1).map((e, i) =>\r\n          <Seat\r\n            i={i}\r\n            step={(Number(occasion.maxTickets) - 24)}\r\n            columnStart={22}\r\n            maxColumns={5}\r\n            rowStart={2}\r\n            maxRows={5}\r\n            seatsTaken={seatsTaken}\r\n            buyHandler={buyHandler}\r\n            key={i}\r\n          />\r\n        )}\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default SeatChart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}